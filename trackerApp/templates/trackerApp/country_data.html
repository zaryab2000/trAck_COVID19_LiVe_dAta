{% extends 'trackerApp/base_index.html' %}

{% block scripts %}

<script>
	$(document).ready(function(){
		var confirmed = "{{confirmed}}"
		var recovered="{{recovered}}"
		var death="{{deaths}}"
		var ctx = document.getElementById('myChart');
		var myChart = new Chart(ctx, {
		    type: 'bar',
		    data: {
		        labels: ['Confirmed Cases', 'Recovered Cases', 'Death Cases'],
		        datasets: [{
		            label: '# of Total Confirmed Cases ',
		            data: [confirmed,recovered,death],
		            backgroundColor: [
		                'rgba(255, 99, 132, 0.5)',
		                'rgba(54, 162, 235, 0.2)',
		                'rgba(255, 206, 86, 0.5)',
		                'rgba(75, 192, 192, 0.2)',
		                'rgba(153, 102, 255, 0.2)',
		                'rgba(255, 159, 64, 0.5)'
		            ],
		            borderColor: [
		                'rgba(255, 99, 132, 1)',
		                'rgba(54, 162, 235, 1)',
		                'rgba(255, 206, 86, 1)',
		                'rgba(75, 192, 192, 1)',
		                'rgba(153, 102, 255, 1)',
		                'rgba(255, 159, 64, 1)'
		            ],
		            borderWidth: 2
		        }]
		    },
		    options: {
		        scales: {
		            yAxes: [{
		                ticks: {
		                    beginAtZero: true
		                }
		            }]
		        }
		    }
		});
});

</script>


{% endblock scripts %}
{% block content %}
<div class="text-center">
	<h1 class="col-md-12 offset-md-3 text-center">COVID-19 DATA FROM ACROSS THE WORLD</h1>
	<div class="contain" style="text-align: center;">
		<!-- SELECT BOX -->
		<form method="POST">
			<h3 class="col-md-12 offset-md-3 text-center">SELECT COUNTRY</h3>
			{%csrf_token%}
		  <div class="form-group d-flex justify-content-center col-md-12 offset-md-2 text-center">
		
		    <select class=" opt form-control text-center align-middle col-md-12 offset-md-2  " id="exampleFormControlSelect1 " name="country_name">
		    <option class="opt text-left align-middle ">SELECT A COUNTRY </option>
		      {% for name in names %}
		      <option >{{name}}</option>
		      {% endfor %}
		    </select>
	
		  </div>
		  <button type="submit " class="btn btn-outline-primary col-md-12 offset-md-3 text-center">Get Updates</button>
	</form>


	<div class="contain" style="text-align: center;">
		<!-- OVERALL DATA -->
		<form class="form-inline d-flex justify-content-around centre col-md-12 offset-md-3 text-center">
			<div class="line"></div>
		<h3>CONFIRMED - {{confirmed}}</h3>
		<h3>RECOVERED -{{recovered}}</h3>
		<h3>DEATHS - {{deaths}}</h3></form>
	</div>

	<div class="containe col-md-12 offset-md-3 text-center" width="500" height="250" style="margin-right:100px">
		<h3>VISUALIZING THE STATS</h3>
		<div class="block"   style="background-color: rgb(228, 228, 228);">
			<canvas id="myChart" width="500" height="250" style="margin-right:200px; align-items: center;"></canvas></div>
	</div>
</div>

</div>

{% endblock %}
